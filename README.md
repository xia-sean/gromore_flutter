# gromore_flutter

<div align="center">
ã€â™»ï¸ æŒç»­æ›´æ–°ã€‘ä¸€æ¬¾ä¼˜è´¨çš„ GroMore èšåˆ Flutter å¹¿å‘Šæ’ä»¶ï¼Œæ”¯æŒå¤šå¹¿å‘Šç±»å‹ã€äº‹ä»¶å›è°ƒä¸å¤š ADN é…ç½®ã€‚

![pub](https://img.shields.io/pub/v/gromore_flutter?label=pub&color=blue)
![platform](https://img.shields.io/badge/platform-Android%20%7C%20iOS-4CAF50)
![license](https://img.shields.io/badge/license-MIT-9C27B0)
![repo](https://img.shields.io/badge/github-xia--sean%2Fgromore__flutter-black)

<br/>
<img src="https://raw.githubusercontent.com/xia-sean/gromore_flutter/main/doc/images/wechat_qr.png" width="120" alt="å¾®ä¿¡äºŒç»´ç " />
<br/>
<br/>

é‚®ç®±ğŸ“¬ xm_sean@163.com

</div>

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

- âœ…å¼€å±å¹¿å‘Š
- âœ…æ’å±å¹¿å‘Š 
- âœ…å…¨å±è§†é¢‘
- âœ…Banner
- âœ…æ¿€åŠ±è§†é¢‘
- âœ…ä¿¡æ¯æµï¼ˆæ¨¡æ¿/è‡ªæ¸²æŸ“å¯é€‰ï¼‰
- âœ…Draw ä¿¡æ¯æµ
- ğŸ†å¤šç«¯ AppId/AppName é…ç½®ï¼šå½“å‰å¹³å°ç¼ºå¤±ä¼šåˆå§‹åŒ–å¤±è´¥ï¼Œéå½“å‰å¹³å°ä¼šè¿”å› `skipped`
- ğŸ†æ—¥å¿—ç³»ç»Ÿï¼šDebug é»˜è®¤å¼€å¯ï¼ŒRelease é»˜è®¤å…³é—­ï¼Œå¯æ‰‹åŠ¨å¼€å…³ï¼›æ”¯æŒæ—¥å¿—çº§åˆ«ä¸æ—¥å¿—å›è°ƒ
- ğŸ†é¢„ç•™ nativeOptions/invokeNative å…œåº•èƒ½åŠ›ï¼Œè¦†ç›–å¹³å°å·®å¼‚
- ğŸ†ç¤ºä¾‹å·¥ç¨‹ï¼šæ¯ç§å¹¿å‘Šç±»å‹ä¸€ä¸ªé¡µé¢ï¼Œæ”¯æŒè¾“å…¥çœŸå® appId/ä»£ç ä½
- ğŸ†æ–‡æ¡£æ¸…æ™°å®Œæ•´ï¼Œæ–¹æ³•ç®€å•

## ğŸ“¡ ç¤ºä¾‹æˆªå›¾

<div align="center">
  <img src="https://raw.githubusercontent.com/xia-sean/gromore_flutter/main/doc/images/1.jpg" width="19%" />
  <img src="https://raw.githubusercontent.com/xia-sean/gromore_flutter/main/doc/images/2.jpg" width="19%" />
  <img src="https://raw.githubusercontent.com/xia-sean/gromore_flutter/main/doc/images/3.jpg" width="19%" />
  <img src="https://raw.githubusercontent.com/xia-sean/gromore_flutter/main/doc/images/4.jpg" width="19%" />
  <img src="https://raw.githubusercontent.com/xia-sean/gromore_flutter/main/doc/images/5.jpg" width="19%" />
</div>

## ğŸ¡ æ¶æ„

- `MethodChannel`ï¼šåˆå§‹åŒ–ã€åŠ è½½/å±•ç¤º/é”€æ¯ã€æ—¥å¿—æ§åˆ¶
- `EventChannel`ï¼šå¹¿å‘Šäº‹ä»¶ã€åŸç”Ÿæ—¥å¿—
- Flutter ä¾§é€šè¿‡ `GromoreFlutter.instance` ä½¿ç”¨æ’ä»¶

## ğŸ“± æœ€ä½ç³»ç»Ÿç‰ˆæœ¬

- Androidï¼šminSdk 24ï¼ˆAndroid 7.0ï¼‰
- iOSï¼š12.0

## ğŸ• çŠ¶æ€
å½“å‰ç‰ˆæœ¬å·²å®Œæˆ Flutter å±‚ API ä¸åŸç”Ÿé€šé“éª¨æ¶ï¼Œå¹¶å®Œæˆ GroMore åŸç”Ÿ SDK æ¥å…¥ä¸å¹¿å‘Šäº‹ä»¶æ˜ å°„ã€‚  
SDK å…·ä½“ç‰ˆæœ¬è§ä¸‹æ–¹â€œå½“å‰å†…ç½®çš„å®˜æ–¹ SDK ç‰ˆæœ¬â€ã€‚  
å¦‚éœ€é€‚é…å®˜æ–¹ SDK æ›´æ–°ï¼Œè¯·è”ç³»ç»´æŠ¤è€…ï¼ˆå¾®ä¿¡ï¼šyiluocheng / é‚®ç®±ï¼šxm_sean@163.comï¼‰ã€‚

## ğŸ’» å®‰è£…

åœ¨ä½ çš„ Flutter é¡¹ç›®ä¸­æ·»åŠ ä¾èµ–ï¼š

```yaml
dependencies:
  gromore_flutter: ^2.1.2
```

## ğŸ”œ å¿«é€Ÿå¼€å§‹ï¼ˆ4 æ­¥ï¼‰
1) æ·»åŠ ä¾èµ–ï¼ˆè§ä¸Šæ–¹å®‰è£…ï¼‰ã€‚  
2) é…ç½®å¹³å°æœ€å°é¡¹ï¼šAndroid æƒé™ä¸ Manifestã€iOS Info.plistï¼ˆå¦‚å¼•å…¥å…¶å®ƒ ADNï¼Œå†è¡¥å„å¹³å°ä¸“æœ‰å­—æ®µï¼‰ã€‚  
3) åˆå§‹åŒ–ï¼ˆiOS è‹¥éœ€ IDFAï¼Œå…ˆ `requestATT()`ï¼‰ã€‚  
4) åŠ è½½å¹¶å±•ç¤ºå¹¿å‘Šï¼ˆè§ä¸‹æ–¹â€œå¹¿å‘ŠåŠ è½½ä¸å±•ç¤ºâ€ï¼‰ã€‚

## Android/iOS ä¾èµ–è¯´æ˜ï¼ˆå®˜æ–¹ Maven/Podï¼‰

æœ¬æ’ä»¶å·²æŒ‰å®˜æ–¹ Maven/Pod æ¥å…¥ GroMore SDKï¼ˆä»¥å®˜æ–¹æ–‡æ¡£ä¸ºå‡†ï¼Œå¯æŒ‰éœ€è°ƒæ•´ç‰ˆæœ¬ï¼‰ã€‚

- Androidï¼š`android/build.gradle` ä¸­å·²æ·»åŠ  Pangle/GroMore Maven ä»“åº“ä¸ SDK ä¾èµ–ã€‚
- iOSï¼š`ios/gromore_flutter.podspec` å·²æ·»åŠ  `BUAdSDK` ä¸ `CSJMediation` ä¾èµ–ã€‚

Android ç«¯é»˜è®¤ä¸å¼•å…¥ä»»ä½• Adapterï¼ˆä»… GroMore æ ¸å¿ƒï¼‰ï¼›å¯é€šè¿‡ `GM_ADNS` æ§åˆ¶æ¥å…¥å¹³å°ã€‚

## å½“å‰å†…ç½®çš„å®˜æ–¹ SDK ç‰ˆæœ¬

ä»¥ä¸‹ç‰ˆæœ¬æ¥è‡ªæ’ä»¶å·¥ç¨‹å†…ç½®ä¾èµ–ï¼ˆå¦‚éœ€è°ƒæ•´å¯ä¿®æ”¹å¯¹åº”æ–‡ä»¶ï¼‰ï¼š

**iOSï¼ˆPodï¼‰**
- GroMore æ ¸å¿ƒï¼š`Ads-CN-Beta 7.4.0.3`ï¼ˆå« `BUAdSDK/CSJMediation`ï¼‰

**Androidï¼ˆMavenï¼‰**
- GroMore æ ¸å¿ƒï¼š`com.pangle_beta.cn:mediation-sdk:7.4.0.7`
- æµ‹è¯•å·¥å…·ï¼ˆDebugï¼‰ï¼š`com.pangle_beta.cn:mediation-test-tools:7.4.0.7`

**Androidï¼ˆå·²å›ºå®šçš„ Adapter ç‰ˆæœ¬ï¼‰**
- GDTï¼š`com.pangle_beta.cn:mediation-gdt-adapter:4.662.1532.0`
- ç™¾åº¦ï¼š`com.pangle_beta.cn:mediation-baidu-adapter:9.423.3`
- å¿«æ‰‹ï¼š`com.pangle_beta.cn:mediation-ks-adapter:4.11.20.1.0`
- AdMobï¼š`com.pangle_beta.cn:mediation-admob-adapter:17.2.0.72`
- Sigmobï¼š`com.pangle_beta.cn:mediation-sigmob-adapter:4.25.2.0`

## Android éœ€è¦çš„æƒé™ä¸ Manifest é…ç½®ï¼ˆè¯·æŒ‰å®˜æ–¹æ–‡æ¡£ä¸ä¸šåŠ¡éœ€è¦å–èˆï¼‰

ä»¥ä¸‹ä¸ºç¤ºä¾‹å·¥ç¨‹ä¸­å¸¸è§é…ç½®ï¼Œè¯·ç»“åˆä½ çš„éšç§åˆè§„ä¸ä¸šåŠ¡å®é™…æƒ…å†µå–èˆï¼š

- å¿…é€‰/å¸¸ç”¨æƒé™ï¼š
  - `android.permission.INTERNET`
  - `android.permission.ACCESS_NETWORK_STATE`
  - `android.permission.ACCESS_WIFI_STATE`
  - `android.permission.CHANGE_NETWORK_STATE`
  - `android.permission.READ_PHONE_STATE`ï¼ˆéƒ¨åˆ† SDK ä»éœ€ï¼‰
- å¯é€‰æƒé™ï¼ˆæŒ‰ä¸šåŠ¡åœºæ™¯ä¸åˆè§„è¦æ±‚å†³å®šï¼‰ï¼š
  - `android.permission.ACCESS_COARSE_LOCATION` / `android.permission.ACCESS_FINE_LOCATION`
  - `android.permission.REQUEST_INSTALL_PACKAGES`
  - `android.permission.POST_NOTIFICATIONS`ï¼ˆAndroid 13 é€šçŸ¥ï¼‰
  - `android.permission.QUERY_ALL_PACKAGES`ï¼ˆç”¨äºå¹¿å‘Šå®‰è£…æ£€æµ‹ï¼Œéœ€éšç§å£°æ˜ï¼‰
  - `android.permission.VIBRATE` / `android.permission.RECEIVE_USER_PRESENT`
  - `android.permission.SYSTEM_ALERT_WINDOW` / `android.permission.EXPAND_STATUS_BAR`
  - `android.permission.WRITE_EXTERNAL_STORAGE`ï¼ˆæ—§ç‰ˆæœ¬å­˜å‚¨ï¼‰

Manifest å…³é”®é…ç½®ç¤ºä¾‹ï¼ˆæŒ‰éœ€è°ƒæ•´ï¼‰ï¼š

```xml
<application
    android:networkSecurityConfig="@xml/network_config"
    android:requestLegacyExternalStorage="true">

    <provider
        android:name="com.bytedance.sdk.openadsdk.TTFileProvider"
        android:authorities="${applicationId}.TTFileProvider"
        android:exported="false"
        android:grantUriPermissions="true">
        <meta-data
            android:name="android.support.FILE_PROVIDER_PATHS"
            android:resource="@xml/file_paths" />
    </provider>
</application>
```

`res/xml/file_paths.xml` ç¤ºä¾‹ï¼š

```xml
<?xml version="1.0" encoding="utf-8"?>
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <external-path name="external_storage_root" path="." />
</paths>
```

> æ··æ·†ï¼ˆProGuard/R8ï¼‰ä¸æ”¯æŒæ¶æ„è¯·æŒ‰å®˜æ–¹æ–‡æ¡£é…ç½®ï¼›ç¤ºä¾‹å·¥ç¨‹å¸¸è§æ”¯æŒ `armeabi-v7a`/`arm64-v8a`ã€‚

**Android å¹³å°é¢å¤–å¿…éœ€é…ç½®ï¼ˆæŒ‰æ‰€é€‰ ADNï¼‰**
- è‹¥å¯ç”¨ AdMobï¼ˆå« adapterï¼‰ï¼Œéœ€åœ¨ `AndroidManifest.xml` æ·»åŠ ï¼š
```xml
<meta-data
    android:name="com.google.android.gms.ads.APPLICATION_ID"
    android:value="ca-app-pub-xxxxxxxxxxxxxxxx~yyyyyyyyyy" />
```
- å…¶ä»–å¹³å°å¦‚æœ‰ AppId/AppKey/æƒé™è¦æ±‚ï¼Œè¯·æŒ‰å¯¹åº” SDK æ–‡æ¡£è¡¥é½ï¼›æœªå¼•å…¥çš„å¹³å°æ— éœ€é…ç½®ã€‚

**Android ADN é€‰æ‹©ï¼ˆGM_ADNSï¼‰**
- **é»˜è®¤å€¼**ï¼š`GM_ADNS=none`ï¼ˆä»… GroMore æ ¸å¿ƒï¼Œä¸å¼•å…¥ä»»ä½• Adapterï¼‰ã€‚  
- **å¯é€‰å€¼**ï¼š`gdt,baidu,ks,sigmob,admob`ï¼Œ`GM_ADNS=all` è¡¨ç¤ºå…¨é‡ã€‚
- **é…ç½®æ–¹å¼ 1ï¼šgradle.propertiesï¼ˆæ¨èï¼‰**
```
GM_ADNS=gdt,baidu
```
- **é…ç½®æ–¹å¼ 2ï¼šGradle å‘½ä»¤è¡Œ**
```
./gradlew assembleDebug -PGM_ADNS=gdt,baidu
```
- **é…ç½®æ–¹å¼ 3ï¼šflutter run ç¯å¢ƒå˜é‡**
- **æç¤º**ï¼šç¯å¢ƒå˜é‡å¿…é¡»å‰ç½®ï¼ˆå¦‚ `GM_ADNS=... flutter run`ï¼‰ï¼Œä¸èƒ½å†™æˆ `flutter run GM_ADNS=...`ã€‚
```
GM_ADNS=gdt,baidu flutter run
```

## iOS éœ€è¦çš„ Info.plist é…ç½®ï¼ˆè¯·æŒ‰å®˜æ–¹æ–‡æ¡£ä¸ä¸šåŠ¡éœ€è¦å–èˆï¼‰

ä»¥ä¸‹ä¸ºç¤ºä¾‹å·¥ç¨‹ä¸­å¸¸è§é…ç½®ï¼Œè¯·ç»“åˆä½ çš„éšç§åˆè§„ä¸ä¸šåŠ¡å®é™…æƒ…å†µå–èˆï¼š

- `NSUserTrackingUsageDescription`ï¼ˆè·å– IDFA çš„æç¤ºæ–‡æ¡ˆï¼‰
- `NSAppTransportSecurity`ï¼ˆç½‘ç»œè®¿é—®ç­–ç•¥ï¼Œå»ºè®®ç²¾ç»†åŒ–é…ç½®åŸŸåï¼‰
- `NSLocationWhenInUseUsageDescription` / `NSLocationAlwaysUsageDescription`ï¼ˆå¦‚ä½¿ç”¨å®šä½ï¼‰
- `NSCameraUsageDescription`ï¼ˆå¦‚å¹¿å‘Šè½åœ°é¡µéœ€ç›¸æœºï¼‰
- `LSApplicationQueriesSchemes`ï¼ˆç¬¬ä¸‰æ–¹åº”ç”¨è·³è½¬èƒ½åŠ›ï¼‰
- `SKAdNetworkItems`ï¼ˆSKAdNetwork é…ç½®åˆ—è¡¨ï¼ŒæŒ‰å®˜æ–¹æ–‡æ¡£è¡¥é½ï¼‰

> è‹¥æ¥å…¥å¤šå®¶ ADNï¼ˆå¦‚å¹¿ç‚¹é€š/å¿«æ‰‹/ç™¾åº¦ç­‰ï¼‰ï¼Œè¯·æŒ‰å¯¹åº” SDK æ–‡æ¡£è¡¥å……ç›¸å…³ `Info.plist` ä¸ç³»ç»Ÿèƒ½åŠ›é…ç½®ã€‚

**æœ€å°é…ç½®è¯´æ˜**
- ä»…ä½¿ç”¨ GroMore æ ¸å¿ƒæ—¶ï¼Œä¸éœ€è¦é¢å¤–ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆADNï¼‰çš„ AppId/AppKey/ä¸“æœ‰å­—æ®µã€‚
- åªè¦å¼•å…¥æŸä¸ªå¹³å° SDK/Adapterï¼Œå°±å¿…é¡»è¡¥é½è¯¥å¹³å°è¦æ±‚çš„ `Info.plist`/æƒé™/ç³»ç»Ÿèƒ½åŠ›é…ç½®ï¼ˆä¾‹å¦‚ AdMob çš„ `GADApplicationIdentifier`ï¼‰ã€‚
- æ’ä»¶ä¸ä¼šè‡ªåŠ¨ä¿®æ”¹åº”ç”¨ä¾§çš„ `Info.plist`ï¼Œè¿™äº›å­—æ®µéœ€è¦æ¥å…¥æ–¹æ‰‹åŠ¨è¡¥å……ã€‚

## iOS å¤š ADN é…ç½®ï¼ˆå®˜æ–¹æ¨è / å›ºå®šç‰ˆæœ¬ï¼‰

æœ¬æ’ä»¶é»˜è®¤åªä¾èµ– GroMore æ ¸å¿ƒï¼ˆ`Ads-CN-Beta/CSJMediation`ï¼‰ã€‚è¦å¯ç”¨å¤šå¹³å°ç«ä»·/åŠ è½½ï¼Œéœ€è¦é¢å¤–å¼•å…¥å„ ADN SDK + Adapterã€‚

æˆ‘ä»¬æä¾›ä¸¤ç§æ¨¡å¼ï¼Œ`å®˜æ–¹æ¨èæ¨¡å¼` å’Œ `å›ºå®šç‰ˆæœ¬æ¨¡å¼`ï¼ˆåœ¨ä½ ä¸šåŠ¡å·¥ç¨‹iOSçš„ `Podfile` ä¸­é…ç½®ï¼‰ï¼š

**æ³¨æ„äº‹é¡¹**  
- å®˜æ–¹æ¨èæ¨¡å¼ä¾èµ–è¿œç«¯æ¥å£ï¼Œç½‘ç»œå—é™æ—¶å¯èƒ½å¡ä½ï¼›å¯ç”¨å›ºå®šç‰ˆæœ¬æ¨¡å¼é™çº§ã€‚  
- ä½¿ç”¨å®˜æ–¹æ¨èæ¨¡å¼å‰éœ€å®‰è£…æ’ä»¶ï¼š`sudo gem install cocoapods-byte-csjm`ã€‚  
- ä¹Ÿå¯ç”¨ `CSJM_DISABLE_REMOTE=1` ä¸€é”®é™çº§ï¼ˆç­‰åŒ `GM_MODE=fixed`ï¼‰ã€‚  
- è‹¥åŒ…å« AdMobï¼ˆ`admob`ï¼‰ï¼ŒiOS å¿…é¡»åœ¨ `Info.plist` é…ç½® `GADApplicationIdentifier`ï¼Œå¦åˆ™ä¼šç›´æ¥å´©æºƒã€‚  
- å„å¹³å°é€šå¸¸éƒ½æœ‰è‡ªå·±çš„ AppId/AppKey/Info.plist/Manifest è¦æ±‚ï¼Œè¯·æŒ‰å¯¹åº” SDK æ–‡æ¡£è¡¥é½ã€‚

**å¦‚ä½•é€‰æ‹©ï¼ˆä¼˜åŠ£å¯¹æ¯”ï¼‰**
- å®˜æ–¹æ¨èæ¨¡å¼ï¼ˆ`GM_MODE=official`ï¼‰
  - **ç‰ˆæœ¬å«ä¹‰**ï¼šAdapter ç‰ˆæœ¬ç”±å®˜æ–¹è¿œç«¯æ¥å£æ¨èå¹¶è‡ªåŠ¨åŒ¹é…ã€‚
  - ä¼˜ç‚¹ï¼šAdapter ç‰ˆæœ¬ä¸å®˜æ–¹åå°æ¨èåŒ¹é…ï¼Œå…¼å®¹æ€§æ›´ç¨³ï¼Œé€‚é…å…³ç³»æ›´æ–°æ›´å¿«ã€‚
  - ç¼ºç‚¹ï¼šä¾èµ–è¿œç«¯æ¥å£ä¸ç½‘ç»œç¯å¢ƒï¼Œå¯èƒ½å¡ä½æˆ–æ‹‰å–å¤±è´¥ã€‚
- å›ºå®šç‰ˆæœ¬æ¨¡å¼ï¼ˆ`GM_MODE=fixed`ï¼‰
  - **ç‰ˆæœ¬å«ä¹‰**ï¼šAdapter ç‰ˆæœ¬æŒ‰ Podfile ä¸­å›ºå®šå€¼ä½¿ç”¨ï¼ˆç¤ºä¾‹è§ `example/ios/Podfile` çš„ `ADAPTERS_BETA` ç‰ˆæœ¬è¡¨ï¼‰ã€‚
  - ä¼˜ç‚¹ï¼šç¦»çº¿å¯ç”¨ã€å¯é‡å¤æ„å»ºã€å®‰è£…æ›´ç¨³å®šã€‚
  - ç¼ºç‚¹ï¼šç‰ˆæœ¬ä¸è‡ªåŠ¨æ›´æ–°ï¼Œå¯èƒ½ä¸å®˜æ–¹æ¨èæœ‰åå·®ï¼Œéœ€è¦æ‰‹åŠ¨ç»´æŠ¤ã€‚

**1) å®˜æ–¹æ¨èæ¨¡å¼**  
ç”± `cocoapods-byte-csjm` æ’ä»¶è¿œç«¯åŒ¹é… Adapter ç‰ˆæœ¬ã€‚ä½¿ç”¨ `GM_MODE=official pod install` å¼€å¯å®˜æ–¹æ¨èæ¨¡å¼ï¼›ä¸è®¾ç½® `GM_MODE` æ—¶é»˜è®¤ä¸º `fixed`ã€‚

**2) å›ºå®šç‰ˆæœ¬æ¨¡å¼ï¼ˆé»˜è®¤ï¼Œç¦»çº¿å…œåº•ï¼‰**  
ä¸èµ°è¿œç«¯åŒ¹é…ï¼Œç›´æ¥ä½¿ç”¨å›ºå®šçš„ Adapter ç‰ˆæœ¬ã€‚

**ADN é€‰æ‹©ï¼ˆGM_ADNSï¼‰**  
- `GM_ADNS` ä¸ºç™½åå•ï¼Œé€—å·åˆ†éš”ï¼ˆå¦‚ `gdt,baidu`ï¼‰ã€‚  
- `GM_ADNS=all` è¡¨ç¤ºå…¨é‡ï¼ˆ`gdt,baidu,ks,sigmob,mtg,admob,unity`ï¼‰ï¼›`GM_ADNS=none` è¡¨ç¤ºä»… GroMore æ ¸å¿ƒã€‚  
- `GM_ADNS` ä¸ºç©ºæ—¶å– Podfile é»˜è®¤å€¼ï¼ˆç¤ºä¾‹å·¥ç¨‹é»˜è®¤ `none`ï¼‰ã€‚  
- å»ºè®®ä¸šåŠ¡å·¥ç¨‹æ˜¾å¼è®¾ç½® `GM_ADNS`ï¼Œé¿å…é»˜è®¤å€¼ä¸æ¸…æ™°ã€‚
- **æç¤º**ï¼šç¯å¢ƒå˜é‡å¿…é¡»å‰ç½®ï¼ˆå¦‚ `GM_ADNS=... pod install`ï¼‰ï¼Œä¸èƒ½å†™æˆ `pod install GM_ADNS=...`ã€‚

**å‘½ä»¤ç¤ºä¾‹**
```bash
# å®˜æ–¹æ¨èï¼šå…¨é‡ï¼ˆgdt,baidu,ks,sigmob,mtg,admob,unityï¼‰
GM_MODE=official GM_ADNS=all pod install

# å®˜æ–¹æ¨èï¼šéƒ¨åˆ†å¹³å°
GM_MODE=official GM_ADNS=gdt,baidu pod install

# å›ºå®šç‰ˆæœ¬ï¼šä»… GroMore æ ¸å¿ƒ
GM_MODE=fixed GM_ADNS=none pod install

# å›ºå®šç‰ˆæœ¬ï¼šåªæ¥å…¥ AdMobï¼ˆéœ€åŒæ—¶é…ç½® iOS GADApplicationIdentifierï¼‰
GM_MODE=fixed GM_ADNS=admob pod install
```

## åˆå§‹åŒ–ï¼ˆå®Œæ•´ç¤ºä¾‹ï¼‰

**å‚æ•°è¯´æ˜**
- `androidAppId/androidAppName/iosAppId/iosAppName`ï¼šå¹³å° AppId/AppNameï¼›å½“å‰å¹³å°ç¼ºå¤±ä¼šåˆå§‹åŒ–å¤±è´¥ï¼Œéå½“å‰å¹³å°å¯ä¸å¡«ã€‚
- `debug`ï¼šæ˜¯å¦è°ƒè¯•æ¨¡å¼ï¼ˆå»ºè®® Debug=trueï¼ŒRelease=falseï¼‰ã€‚
- `useMediation`ï¼šæ˜¯å¦å¯ç”¨èšåˆã€‚
- `enableLog`ï¼šæ—¥å¿—å¼€å…³ï¼ˆä¸ä¼ åˆ™ Debug é»˜è®¤å¼€ã€Release é»˜è®¤å…³ï¼‰ã€‚
- `enabledAdTypes`ï¼šå¯ç”¨çš„å¹¿å‘Šç±»å‹é›†åˆï¼›æœªå¯ç”¨çš„ç±»å‹ä¼šåœ¨ `loadAd` æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚
  - æ”¯æŒç±»å‹ï¼š`splash / interstitial / fullscreenVideo / rewardVideo / native / drawNative / banner`
- `androidOptions/iosOptions`ï¼šæ‰©å±•å‚æ•°é€ä¼ ç»™åŸç”Ÿï¼ˆæŒ‰å®˜æ–¹æ–‡æ¡£/ä¸šåŠ¡éœ€æ±‚å¡«å†™ï¼‰ã€‚

**è¿”å›ç»“æœ**
- `InitResult.android/ios`ï¼šåˆ†åˆ«è¡¨ç¤º Android/iOS çš„åˆå§‹åŒ–ç»“æœï¼›æœªé…ç½®çš„å¹³å°ä¼šè¿”å› `skipped`ã€‚

**åˆå§‹åŒ–ç›¸å…³æ–¹æ³•**
- `requestATT()`ï¼šiOS ATT æˆæƒè¯·æ±‚ï¼ˆä»… iOS ç”Ÿæ•ˆï¼‰ã€‚
- `init(config)`ï¼šåˆå§‹åŒ– GroMoreã€‚
- `setLogEnabled(bool)`ï¼šåŠ¨æ€å¼€å…³æ—¥å¿—ã€‚
- `setLogLevel(LogLevel)`ï¼šè®¾ç½®æ—¥å¿—çº§åˆ«ã€‚
- `GromoreLogger.setPrintNativeLog(bool)`ï¼šæ˜¯å¦æŠŠåŸç”Ÿæ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚

```dart
import 'package:flutter/foundation.dart';
import 'package:gromore_flutter/gromore_flutter.dart';

// 1) å¯é€‰ï¼šiOS ATTï¼ˆä»… iOS ç”Ÿæ•ˆï¼‰
await GromoreFlutter.instance.requestATT();

// 2) åˆå§‹åŒ–é…ç½®ï¼ˆè¦†ç›–æ‰€æœ‰å­—æ®µï¼‰
final config = GromoreConfig(
  androidAppId: 'your_android_app_id',
  androidAppName: 'your_android_app_name',
  iosAppId: 'your_ios_app_id',
  iosAppName: 'your_ios_app_name',
  debug: kDebugMode,
  useMediation: true,
  enableLog: true, // ä¸ä¼ åˆ™ Debug é»˜è®¤å¼€ã€Release é»˜è®¤å…³
  enabledAdTypes: {
    GromoreAdType.splash,
    GromoreAdType.interstitial,
    GromoreAdType.fullscreenVideo,
    GromoreAdType.rewardVideo,
    GromoreAdType.native,
    GromoreAdType.drawNative,
    GromoreAdType.banner,
  },
  // é€ä¼ ç»™åŸç”Ÿçš„æ‰©å±•å‚æ•°ï¼ˆæŒ‰éœ€å¡«å†™ï¼‰
  androidOptions: {'custom': 'value'},
  iosOptions: {'custom': 'value'},
);

// 3) åˆå§‹åŒ–
final result = await GromoreFlutter.instance.init(config);

// 4) æ—¥å¿—å¼€å…³/çº§åˆ«ï¼ˆå¯åœ¨ init å‰åè°ƒç”¨ï¼‰
await GromoreFlutter.instance.setLogEnabled(true);
await GromoreFlutter.instance.setLogLevel(LogLevel.info);
GromoreLogger.setPrintNativeLog(true);

// 5) ç»“æœå¤„ç†
if (!result.android.success) {
  debugPrint('Android init failed: ${result.android.errorCode} ${result.android.errorMessage}');
}
if (!result.ios.success) {
  debugPrint('iOS init failed: ${result.ios.errorCode} ${result.ios.errorMessage}');
}
```

## æ—¥å¿—

- Debug æ¨¡å¼é»˜è®¤å¼€å¯ï¼›Release é»˜è®¤å…³é—­ï¼Œå¯æ‰‹åŠ¨æ§åˆ¶ã€‚
- åŸç”Ÿæ—¥å¿—ä¸ä¼šé»˜è®¤é‡å¤è¾“å‡ºåˆ° Dart æ§åˆ¶å°ï¼ˆé¿å…é‡å¤ï¼‰ï¼Œå¯é€šè¿‡ `setPrintNativeLog(true)` å¼€å¯ã€‚

```dart
GromoreLogger.setLogEnabled(true);
GromoreLogger.setLogLevel(LogLevel.info);
GromoreLogger.setHandler((event) {
  // è‡ªå®šä¹‰æ—¥å¿—å¤„ç†
});
```

## æŸ¥çœ‹å¹¿å‘Šå¹³å°æ¥æºï¼ˆecpmInfoï¼‰
`loaded/shown` äº‹ä»¶ä¼šå°½åŠ›é™„å¸¦ `data.ecpmInfo`ï¼Œä½†ä»…åœ¨ SDK æœ‰å±•ç¤º eCPM ä¿¡æ¯æ—¶æ‰è¿”å›ã€‚  
æ³¨æ„ï¼š`loaded` é˜¶æ®µéƒ¨åˆ†å¹³å°å¯èƒ½è¿˜æ‹¿ä¸åˆ°æ¥æºï¼Œå»ºè®®ä»¥ `shown` ä¸ºå‡†ï¼›å­—æ®µä¹Ÿå¯èƒ½ä¸º `null`ã€‚

**å­—æ®µè¯´æ˜ï¼ˆå¸¸è§å­—æ®µï¼Œå®é™…ä»¥å¹³å°è¿”å›ä¸ºå‡†ï¼‰**
- `sdkName`ï¼šå¹¿å‘Šå¹³å°/ADN åç§°ï¼ˆå¦‚ pangle/gdt/baidu/admob ç­‰ï¼‰ã€‚
- `customSdkName`ï¼šè‡ªå®šä¹‰å¹³å°åç§°ï¼ˆå¦‚æœ‰ï¼‰ã€‚
- `slotId`ï¼šå¹³å°ä¾§ä»£ç ä½/å¹¿å‘Šä½ IDã€‚
- `ecpm`ï¼šå¹³å°å›ä¼ çš„ eCPM æ•°å€¼ï¼ˆå•ä½/ç²¾åº¦ç”±å¹³å°å†³å®šï¼‰ã€‚
- `reqBiddingType`ï¼šè¯·æ±‚/ç«ä»·ç±»å‹ï¼ˆintï¼‰ã€‚
- `levelTag`ï¼šç€‘å¸ƒæµå±‚çº§/æ ‡ç­¾ã€‚
- `errorMsg`ï¼šè·å– eCPM å¤±è´¥æ—¶çš„é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰ã€‚
- `requestId`ï¼šè¯·æ±‚ IDã€‚
- `ritType`ï¼šrit ç±»å‹/å¹¿å‘Šç±»å‹æ ‡è¯†ï¼ˆintï¼‰ã€‚
- `abTestId`ï¼šAB å®éªŒæ ‡è¯†ã€‚
- `scenarioId`ï¼šåœºæ™¯ IDã€‚
- `segmentId`ï¼šåˆ†ç¾¤ IDã€‚
- `channel` / `subChannel`ï¼šæ¸ é“/å­æ¸ é“æ ‡è¯†ã€‚
- `customData`ï¼šAndroid æ‰©å±•å­—æ®µï¼ˆMapï¼‰ã€‚
- `creativeId`ï¼šiOS åˆ›æ„ IDã€‚
- `subRitType`ï¼šiOS å­ rit ç±»å‹ï¼ˆintï¼‰ã€‚

```dart
final subscription = GromoreFlutter.instance.listenAdEvents(
  adType: GromoreAdType.rewardVideo,
  callback: GromoreAdCallback(
    onLoaded: (e) {
      final ecpm = (e.data?['ecpmInfo'] as Map?)?.cast<String, dynamic>();
      if (ecpm == null) {
        debugPrint('loaded: ecpmInfo not available');
        return;
      }
      debugPrint('loaded from: ${ecpm['sdkName']} slot=${ecpm['slotId']} ecpm=${ecpm['ecpm']}');
    },
    onShown: (e) {
      final ecpm = (e.data?['ecpmInfo'] as Map?)?.cast<String, dynamic>();
      if (ecpm == null) {
        debugPrint('shown: ecpmInfo not available');
        return;
      }
      debugPrint(
        'shown from: ${ecpm['sdkName']} slot=${ecpm['slotId']} ecpm=${ecpm['ecpm']} '
        'reqBiddingType=${ecpm['reqBiddingType']} requestId=${ecpm['requestId']}',
      );
    },
  ),
);
```

## å¹¿å‘ŠåŠ è½½ä¸å±•ç¤ºï¼ˆç¤ºä¾‹ï¼‰

## 1. äº‹ä»¶ç›‘å¬ï¼ˆæ–°äº‹ä»¶æ¨¡å‹ + å­ç±»äº‹ä»¶ï¼‰

æ¨èä½¿ç”¨ç±»å‹åŒ–å›è°ƒï¼š

```dart
final subscription = GromoreFlutter.instance.listenAdEvents(
  adType: GromoreAdType.rewardVideo,
  callback: GromoreAdCallback(
    onLoaded: (e) => print('loaded: ${e.adId}'),
    onFailed: (e) => print('failed: ${e.errorCode} ${e.errorMessage}'),
    onShown: (e) => print('shown'),
    onClicked: (e) => print('clicked'),
    onClosed: (e) => print('closed'),
    onCompleted: (e) => print('completed'),
    onSkipped: (e) => print('skipped'),
    onRewarded: (e) => print('reward: ${e.rewardName} ${e.rewardAmount}'),
  ),
);
```

ä¹Ÿå¯ç›´æ¥ç›‘å¬äº‹ä»¶æµï¼š

```dart
GromoreFlutter.instance.adEvents.listen((event) {
  print('event: ${event.eventType} ${event.adId}');
});
```

## 2. ç±»å‹åŒ– Config + Facadeï¼ˆæ¨èç”¨æ³•ï¼‰

### 2.1 å¼€å±

```dart
final adId = await GromoreSplash.load(
  const GromoreSplashConfig(
    placementId: 'your_placement_id',
    timeoutMillis: 3500,
  ),
);
await GromoreSplash.show(adId);
```

### 2.2 æ’å±

```dart
final adId = await GromoreInterstitial.load(
  const GromoreInterstitialConfig(
    placementId: 'your_placement_id',
    orientation: 1, // ç«–å±
  ),
);
await GromoreInterstitial.show(adId);
```

### 2.3 å…¨å±è§†é¢‘

```dart
final adId = await GromoreFullscreenVideo.load(
  const GromoreFullscreenVideoConfig(
    placementId: 'your_placement_id',
    orientation: 2, // æ¨ªå±
  ),
);
await GromoreFullscreenVideo.show(adId);
```

### 2.4 æ¿€åŠ±è§†é¢‘

```dart
final adId = await GromoreReward.load(
  const GromoreRewardConfig(
    placementId: 'your_placement_id',
    rewardName: 'coin',
    rewardAmount: 10,
    userId: 'user_001',
  ),
);
await GromoreReward.show(adId);
```

### 2.5 ä¿¡æ¯æµ / Draw

```dart
final feedId = await GromoreFeed.load(
  const GromoreFeedConfig(
    placementId: 'your_placement_id',
    width: 360,
    height: 640,
    adCount: 1,
  ),
);

final drawId = await GromoreDraw.load(
  const GromoreDrawConfig(
    placementId: 'your_placement_id',
    width: 360,
    height: 640,
    adCount: 1,
  ),
);
```

### 2.6 Banner

```dart
final bannerId = await GromoreBanner.load(
  const GromoreBannerConfig(
    placementId: 'your_placement_id',
    width: 320,
    height: 150,
  ),
);
```

## 3. è§†å›¾ç»„ä»¶ï¼ˆé»˜è®¤æ”¯æŒå¯è§æ€§/é®æŒ¡æ£€æµ‹ï¼‰

```dart
GromoreBannerView(
  adId: bannerId,
  width: 320,
  height: 150,
  onVisibilityChanged: (info) {
    print('visible: ${info.visibleFraction} covered=${info.isCovered}');
  },
);

GromoreFeedView(
  adId: feedId,
  width: 360,
  height: 640,
  onVisibilityChanged: (info) {
    print('visible: ${info.visibleFraction}');
  },
);

GromoreDrawView(
  adId: drawId,
  width: 360,
  height: 640,
);
```

å¦‚éœ€å…³é—­å¯è§æ€§æ£€æµ‹ï¼š

```dart
GromoreBannerView(
  adId: bannerId,
  width: 320,
  height: 150,
  enableVisibility: false,
);
```

## 4. èµ„æºé‡Šæ”¾ä¸è®¢é˜…ç®¡ç†

- é¡µé¢/ç»„ä»¶é”€æ¯æ—¶ï¼Œå»ºè®®å–æ¶ˆäº‹ä»¶è®¢é˜…ï¼Œé¿å…é‡å¤å›è°ƒä¸å†…å­˜æ³„æ¼ã€‚  
- å¹¿å‘Šä¸å†ä½¿ç”¨æ—¶ï¼Œè°ƒç”¨ `dispose`/`disposeAd` é‡Šæ”¾èµ„æºï¼ˆå°¤å…¶æ˜¯ Banner/ä¿¡æ¯æµç±»è§†å›¾å¹¿å‘Šï¼‰ã€‚

```dart
// å–æ¶ˆäº‹ä»¶è®¢é˜…
await subscription.cancel();

// é‡Šæ”¾å¹¿å‘Šèµ„æºï¼ˆä»»æ„å¹¿å‘Šç±»å‹å‡å¯ï¼‰
await GromoreFlutter.instance.disposeAd(adId);
// æˆ–è€…ä½¿ç”¨ç±»å‹åŒ– facadeï¼ˆå¦‚ï¼‰
// await GromoreReward.dispose(adId);
```

## ä¿¡æ¯æµæ¨¡å¼è¯´æ˜

- æ¨¡æ¿/Expressï¼šSDK è¿”å›å¹¿å‘Šè§†å›¾ï¼ŒSDK è´Ÿè´£å¹¿å‘Š UI æ¸²æŸ“ï¼›ä½ å°†å…¶æ’å…¥åˆ—è¡¨/ç€‘å¸ƒæµã€‚
- è‡ªæ¸²æŸ“/Nativeï¼šSDK è¿”å›ç´ ææ•°æ®ï¼Œè‡ªå®šä¹‰å¸ƒå±€å¹¶æ³¨å†Œç‚¹å‡»åŒºåŸŸã€‚
- Android è‡ªæ¸²æŸ“ä»…æ”¯æŒå†å²ä»£ç ä½ï¼›å¦‚æ— å†å²ä»£ç ä½è¯·ä½¿ç”¨æ¨¡æ¿ä¿¡æ¯æµã€‚

## é¢„è§ˆå·¥å…·ï¼ˆDebugï¼‰

ä»… Debug ç¯å¢ƒä½¿ç”¨ï¼Œéœ€æ»¡è¶³ SDK ç‰ˆæœ¬ä¸ç™½åå•è¦æ±‚ï¼Œä¸”ä¸Šçº¿å‰ç§»é™¤ç›¸å…³è°ƒè¯•ä»£ç ã€‚

```dart
// Androidï¼šæ‰“å¼€ GroMore æµ‹è¯•å·¥å…·
await GromoreFlutter.instance.invokeNative('openTestTool', {});

// iOSï¼šå¿«é€Ÿé¢„è§ˆï¼ˆéœ€ä¼  ritï¼‰
await GromoreFlutter.instance.invokeNative('openTestTool', {
  'rit': 'your_rit',
  'info': {
    // å¯é€‰å‚æ•°ï¼ŒæŒ‰å®˜æ–¹æ–‡æ¡£é…ç½®
  }
});
```

## ç¤ºä¾‹å·¥ç¨‹

`example/` æä¾›å®Œæ•´ UIï¼šæ¯ç§å¹¿å‘Šç±»å‹ä¸€ä¸ªé¡µé¢ï¼Œå¯åŠ è½½/å±•ç¤º/é”€æ¯ï¼Œå¹¶å±•ç¤ºæ—¥å¿—ä¸çŠ¶æ€ã€‚

æ­¥éª¤ï¼š
1. è¿è¡Œ example
2. åœ¨ã€Œè®¾ç½®ã€é¡µè¾“å…¥ AppId/AppName
3. åœ¨å¯¹åº”å¹¿å‘Šé¡µè¾“å…¥ä»£ç ä½ï¼Œç‚¹å‡»åŠ è½½/å±•ç¤º

ç¤ºä¾‹é»˜è®¤å€¼ï¼ˆä»…ç”¨äºæ¼”ç¤ºï¼‰ï¼š
- Android AppIdï¼š`5786586`
- Android å¼€å±ä»£ç ä½ï¼š`103864669`
- iOS AppIdï¼š`5786645`
- iOS å¼€å±ä»£ç ä½ï¼š`103866437`
